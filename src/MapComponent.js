import React, { Component } from 'react';
import L from 'leaflet';
import { Map, TileLayer, Marker, Popup } from 'react-leaflet';

let myLocationIcon = L.icon({
  iconUrl: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",
  iconSize: [25, 41],
  iconAnchor: [12.5, 41],
  popupAnchor: [0, -41]
})

let otherLocationIcon = L.icon({
  iconUrl: "data:image/png;base64,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",
  iconSize: [25, 41],
  iconAnchor: [12.5, 41],
  popupAnchor: [0, -41]
})
const API_MESSAGES_URL = window.location.hostname === "localhost" ? "http://localhost:9000/Messages" : "prod_url";

class MapComponent extends Component {

  componentDidMount() {
    fetch(API_MESSAGES_URL)
      .then(res => res.json())
      .then((messages) => {
        this.props.updateMessages(messages)
      });

    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition((position) => {
        this.props.onUserLocated({
          lat: position.coords.latitude,
          lng: position.coords.longitude
        })
      }, () => {
        fetch("http://ip-api.com/json/")
          .then((res) => res.json())
          .then((location) => {
            this.props.onUserLocated({
              lat: location.lat,
              lng: location.lon
            });
          });
      });
    } else {
      alert("geolocation IS NOT available");
    }
  }
  render() {
    const state = this.props.state;
    const position = [state.location.lat, state.location.lng]

    return (
      state.isUserLocated ? (
        <Map className="map" center={position} zoom={state.zoom}>
          <TileLayer
            attribution='&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
          />
          <Marker position={position} icon={myLocationIcon}>
            <Popup>
              Now you are <br /> here.
            </Popup>
          </Marker>
          {
            state.messages.map(message => {
              return <Marker key={message._id} position={[message.latitude, message.longitude]} icon={otherLocationIcon}>
                <Popup>
                  {message.name} : {message.message}.
              </Popup>
              </Marker>

            })
          }
        </Map>
      ) : ""
    );
  }
}

export default MapComponent;
